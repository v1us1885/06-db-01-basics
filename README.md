# Домашнее задание к занятию 1. «Типы и структура СУБД» - Филатов А. В.

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Решение 1

1. **Электронные чеки в json-виде:**   
   - *Тип СУБД:* Документоориентированные (например, MongoDB).   
   - *Объяснение:* JSON-подобная структура электронных чеков хорошо соответствует документоориентированным базам данных, где данные могут храниться в формате, близком к JSON.   

2. **Склады и автомобильные дороги для логистической компании:**   
   - *Тип СУБД:* Пространственные (например, PostGIS для PostgreSQL).   
   - *Объяснение:* Пространственные базы данных поддерживают географические данные, что подходит для хранения информации о складах и дорогах.   

3. **Генеалогические деревья:**   
   - *Тип СУБД:* Графовые (например, Neo4j).   
   - *Объяснение:* Графовые базы данных отлично подходят для представления и обработки связей между сущностями.   

4. **Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации:**   
   - *Тип СУБД:* Ключ-значение (например, Redis).   
   - *Объяснение:* Ключ-значение подходит для быстрого доступа к данным по ключу и обеспечивает механизм истечения срока действия (TTL) для кэширования.   

5. **Отношения клиент-покупка для интернет-магазина:**   
   - *Тип СУБД:* Реляционные (например, PostgreSQL, MySQL).   
   - *Объяснение:* Реляционные базы данных подходят для хранения структурированных данных и отношений между ними.   
   
## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

## Решение 2

1. Данные записываются на все узлы с задержкой до часа:   
   - *CAP-классификация:* AP (Availability and Partition tolerance).   
   - *PACELC-классификация:* PA/EC (Partition Availability / Eventual Consistency). 
Пояснение:   
В данном случае, система гарантирует доступность данных и толерантность к разделению, позволяя асинхронную запись с возможной задержкой. Это может привести к тому, что данные на разных узлах могут временно расходиться, но система остается доступной.   

2. При сетевых сбоях система может разделиться на 2 раздельных кластера:   
   - *CAP-классификация:* AP (Availability and Partition tolerance).   
   - *PACELC-классификация:* PC/EC (Partition Consistency / Eventually Consistent).   

3. Система может не прислать корректный ответ или сбросить соединение:   
   - *CAP-классификация:* CP (Consistency and Partition tolerance).   
   - *PACELC-классификация:* PC/EC (Partition Consistency / Eventually Consistent).   
Пояснение:   
В данном случае, система обеспечивает согласованность данных и толерантность к разделению, что может привести к разделению на разные кластеры в случае сетевых сбоев. Временное различие данных возможно, но со временем система стремится к согласованности (eventual consistency).
## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Решение 3

В общем случае, системы могут сочетать принципы BASE (Basically Available, Soft state, Eventually consistent) и ACID (Atomicity, Consistency, Isolation, Durability) в разных частях своей архитектуры. Например, некоторые сервисы могут использовать ACID для операций, где требуется строгая консистентность, а BASE для операций, где допустима более слабая консистентность в пользу повышенной доступности и отзывчивости.


## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

## Решение 4

Система, основанная на фиксации значений с временем жизни и реакции на таймаут, может быть реализована с использованием key-value хранилища с механизмом Pub/Sub, например, Redis.

- *Key-Value хранилище:* Позволяет эффективно хранить и получать значения по ключу.
- *Pub/Sub (Publish/Subscribe):* Позволяет реализовать механизм уведомлений о событиях, таких как истечение таймаута.

**Минусы выбора Redis:**
- *Ограничения по объему данных:* Redis может иметь ограничения по объему данных, что может быть проблемой при хранении больших объемов информации.
- *Не является полноценной СУБД:* Redis предназначен в первую очередь для кэширования и управления ключ-значение, а не для сложных запросов и аналитики, что может быть ограничением в определенных сценариях.